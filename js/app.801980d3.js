(function(){"use strict";var n={8202:function(n,t,e){var i=e(9242),o=e(3396),a=e(7139);const l={id:"app"},s=(0,o._)("h2",null,"Tarea 1 Taller de integracion FLIGTHS.IO",-1),r={id:"container"},c={id:"top"},u={id:"chat"},d=(0,o._)("h1",null,"ChatRoom",-1),p={id:"mesages"},f={key:0},g={class:"user"},h={class:"date"},m={key:1,class:"warn"},y={class:"user"},_={class:"date"},k={id:"map"},v={key:0},w={id:"bot"},b={key:0},z=(0,o._)("h1",null,"Fligths",-1),j=(0,o._)("tr",null,[(0,o._)("th",{colspan:"2"},"Origen"),(0,o._)("th",{colspan:"2"},"Destino"),(0,o._)("th",{rowspan:"2"},"ID de vuelo"),(0,o._)("th",{rowspan:"2"},"Horario")],-1),O=(0,o._)("tr",null,[(0,o._)("th",null,"Aeropuerto"),(0,o._)("th",null,"Ciudad"),(0,o._)("th",null,"Aeropuerto"),(0,o._)("th",null,"Ciudad")],-1);function S(n,t,e,S,C,P){const A=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",l,[s,(0,o._)("button",{onClick:t[0]||(t[0]=n=>P.conect())},"conect"),(0,o._)("button",{onClick:t[1]||(t[1]=n=>P.disconect())},"disconect"),(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("div",u,[d,(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.m_data,(n=>((0,o.wg)(),(0,o.iD)("div",{key:n},["info"==n.message.level?((0,o.wg)(),(0,o.iD)("p",f,[(0,o._)("span",g,(0,a.zw)(n.message.name)+":",1),(0,o.Uk)(" "+(0,a.zw)(n.message.content)+" ",1),(0,o._)("span",h,(0,a.zw)(n.message.date),1)])):((0,o.wg)(),(0,o.iD)("p",m,[(0,o._)("span",y,(0,a.zw)(n.message.name)+":",1),(0,o.Uk)(" "+(0,a.zw)(n.message.content)+" ",1),(0,o._)("span",_,(0,a.zw)(n.message.date),1)]))])))),128))]),(0,o.wy)((0,o._)("input",{class:"mensaje",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>n.msg=t)},null,512),[[i.nr,n.msg]]),(0,o._)("button",{onClick:t[3]||(t[3]=(...n)=>P.sendMessage&&P.sendMessage(...n))},"Send")]),(0,o._)("div",k,[n.f_data?((0,o.wg)(),(0,o.iD)("h1",v,"Estado de Vuelos")):(0,o.kq)("",!0),n.f_data?((0,o.wg)(),(0,o.j4)(A,{key:1,fligts:n.f_data,crashed:n.c_data,landed:n.l_data,planes:n.p_data,takeoff:n.t_data},null,8,["fligts","crashed","landed","planes","takeoff"])):(0,o.kq)("",!0)])]),(0,o._)("div",w,[n.f_data?((0,o.wg)(),(0,o.iD)("div",b,[z,(0,o._)("table",null,[j,O,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.f_data.flights,(n=>((0,o.wg)(),(0,o.iD)("tr",{key:n},[(0,o._)("td",null,(0,a.zw)(n.departure.name)+" ("+(0,a.zw)(n.departure.id)+")",1),(0,o._)("td",null,(0,a.zw)(n.departure.city.name)+" ("+(0,a.zw)(n.departure.city.country.id)+")",1),(0,o._)("td",null,(0,a.zw)(n.destination.name)+" ("+(0,a.zw)(n.destination.id)+")",1),(0,o._)("td",null,(0,a.zw)(n.destination.city.name)+" ("+(0,a.zw)(n.destination.city.country.id)+")",1),(0,o._)("td",null,(0,a.zw)(n.id),1),(0,o._)("td",null,(0,a.zw)(n.departure_date),1)])))),128))])])):(0,o.kq)("",!0)])])])}function C(n,t,e,i,a,l){const s=(0,o.up)("l-tile-layer"),r=(0,o.up)("l-icon"),c=(0,o.up)("l-marker"),u=(0,o.up)("l-polyline"),d=(0,o.up)("l-map");return(0,o.wg)(),(0,o.j4)(d,{style:{height:"450px"},zoom:a.zoom,center:a.center,maxZoom:9,minZoom:1},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{url:a.url,attribution:a.attribution},null,8,["url","attribution"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(e.fligts.flights),(n=>((0,o.wg)(),(0,o.iD)("div",{key:n},[(0,o.Wm)(c,{onClick:t=>l.showPopup(e.fligts.flights[n].departure.name),"lat-lng":[e.fligts.flights[n].departure.location.lat,e.fligts.flights[n].departure.location.long]},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"dep.png"},null,8,["icon-size","icon-anchor"])])),_:2},1032,["onClick","lat-lng"]),(0,o.Wm)(c,{class:"dep",onClick:t=>l.showPopup(e.fligts.flights[n].destination.name),"lat-lng":[e.fligts.flights[n].destination.location.lat,e.fligts.flights[n].destination.location.long]},null,8,["onClick","lat-lng"])])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(e.fligts.flights),(n=>((0,o.wg)(),(0,o.j4)(u,{key:n,"lat-lngs":[[e.fligts.flights[n].departure.location.lat,e.fligts.flights[n].departure.location.long],[e.fligts.flights[n].destination.location.lat,e.fligts.flights[n].destination.location.long]]},null,8,["lat-lngs"])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(e.planes),(n=>((0,o.wg)(),(0,o.iD)("div",{key:n},[Object.keys(e.fligts.flights).includes(n)?((0,o.wg)(),(0,o.j4)(u,{key:0,"lat-lngs":e.planes[n].latlong,color:a.color},null,8,["lat-lngs","color"])):(0,o.kq)("",!0),Object.keys(e.fligts.flights).includes(n)?((0,o.wg)(),(0,o.j4)(c,{key:1,onClick:t=>l.showPlanePopup(n),"lat-lng":[e.planes[n].plane.position.lat,e.planes[n].plane.position.long]},{default:(0,o.w5)((()=>["arrived"==e.planes[n].plane.status?((0,o.wg)(),(0,o.j4)(r,{key:0,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"landed.png"},null,8,["icon-size","icon-anchor"])):(0,o.kq)("",!0),"crashed"==e.planes[n].plane.status?((0,o.wg)(),(0,o.j4)(r,{key:1,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"crash.png"},null,8,["icon-size","icon-anchor"])):(0,o.kq)("",!0),"take-off"==e.planes[n].plane.status?((0,o.wg)(),(0,o.j4)(r,{key:2,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"takeoff.png"},null,8,["icon-size","icon-anchor"])):(0,o.kq)("",!0),"flying"==e.planes[n].plane.status?((0,o.wg)(),(0,o.j4)(r,{key:3,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"plane.png"},null,8,["icon-size","icon-anchor"])):(0,o.kq)("",!0)])),_:2},1032,["onClick","lat-lng"])):((0,o.wg)(),(0,o.j4)(c,{key:2,onClick:t=>l.showPlanePopup(n),"lat-lng":[e.planes[n].plane.position.lat,e.planes[n].plane.position.long],visible:!1},null,8,["onClick","lat-lng"]))])))),128))])),_:1},8,["zoom","center"])}var P=e(4575),A={props:["fligts","crashed","landed","takeoff","planes"],components:{LMap:P.iA,LTileLayer:P.Hw,LMarker:P.$R,LPolyline:P.P6,LIcon:P.QC},data(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:3,center:[51.505,-.159],markerLatLng:[51.504,-.159],color:"red",iconSize:[32,37],iconAnchor:[16,37]}},methods:{showPlanePopup(n){var t=null,e=null,i=null,o=null,a=null,l=null,s=null,r=null,c=null;Object.keys(this.planes).forEach((u=>{u==n&&(t=this.planes[u].plane.captain,e=this.planes[u].plane.airline.name,i=this.planes[u].plane.airline.id,o=this.planes[u].plane.ETA,a=this.planes[u].plane.status,l=this.planes[u].plane.distance,s=this.planes[u].plane.arrival,r=this.planes[u].plane.heading.lat,c=this.planes[u].plane.heading.long)})),alert(`Id vuelo: ${n} \n\n      Aerolinea: ${e} (${i})\n\n      Capitan: ${t}\n\n      ETA: ${o}\n\n      Estado del vuelo: ${a}\n\n      Distancia al destino: ${l}\n\n      Hora de llegada estimada: ${s}\n\n      Direccion: ${r}, ${c}`)},showPopup(n){console.log(n);var t=[],e=[],i=null,o=null;Object.keys(this.fligts.flights).forEach((a=>{this.fligts.flights[a].departure.name==n&&(t.push(a),i=this.fligts.flights[a].departure.city.country.name,o=this.fligts.flights[a].departure.city.name),this.fligts.flights[a].destination.name==n&&(e.push(a),i=this.fligts.flights[a].destination.city.country.name,o=this.fligts.flights[a].destination.city.name)})),alert(`Aeropuerto: ${n} que se encuentra en ${o}, ${i} \n\n      Vuelos hacia el aeropuerto: ${e} \n\n      Vuelos desde el aeropuert: ${t}`)}},computed:{dynamicSize(){return[this.iconSize,1.15*this.iconSize]},dynamicAnchor(){return[this.iconSize/2,1.15*this.iconSize]}}},D=e(89);const $=(0,D.Z)(A,[["render",C]]);var E=$,T={name:"App",components:{HelloWorld:E},data:function(){return{msg:null,connection:null,cEvent:JSON.stringify({type:"join",id:"1b62b209-b288-4459-94ba-3297c013d269",username:"vichonario"}),f_data:null,p_data:{},t_data:[],l_data:[],c_data:[],m_data:[]}},methods:{sendMessage:function(n){if(console.log("the mesage is",this.msg,n),null!=this.msg){var t=JSON.stringify({type:"chat",content:this.msg});this.connection.send(t),this.msg=null}},conect:function(){this.connection.send(this.cEvent)},disconect:function(){this.connection.close()}},created:function(){this.connection=new WebSocket("wss://tarea-1.2022-2.tallerdeintegracion.cl/connect"),this.connection.onmessage=n=>{var t=JSON.parse(n.data);"flights"==t.type?this.f_data=t:"plane"==t.type?Object.keys(this.p_data).includes(t.plane.flight_id)?(this.p_data[t.plane.flight_id].plane=t.plane,this.p_data[t.plane.flight_id].latlong.push([t.plane.position.lat,t.plane.position.long])):this.p_data[t.plane.flight_id]={plane:t.plane,latlong:[[t.plane.position.lat,t.plane.position.long]]}:"message"==t.type?this.m_data.push(t):"take-off"==t.type?(console.log("take off"),this.t_data.push(t),Object.keys(this.p_data).includes(t.flight_id)&&(this.p_data[t.flight_id].latlong=[])):"landing"==t.type?(console.log("landing"),this.l_data.push(t)):"crashed"==t.type&&(console.log("crashed"),this.c_data.push(t))},this.connection.onopen=function(){console.log("Successfully connected to the echo websocket server...")},this.connection.onclose=function(){console.log("Successfully disconnected to the echo websocket server..."),location.reload()}}};const H=(0,D.Z)(T,[["render",S]]);var L=H;(0,i.ri)(L).mount("#app")}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return n[i].call(a.exports,a,a.exports,e),a.exports}e.m=n,function(){var n=[];e.O=function(t,i,o,a){if(!i){var l=1/0;for(u=0;u<n.length;u++){i=n[u][0],o=n[u][1],a=n[u][2];for(var s=!0,r=0;r<i.length;r++)(!1&a||l>=a)&&Object.keys(e.O).every((function(n){return e.O[n](i[r])}))?i.splice(r--,1):(s=!1,a<l&&(l=a));if(s){n.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=n.length;u>0&&n[u-1][2]>a;u--)n[u]=n[u-1];n[u]=[i,o,a]}}(),function(){e.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return e.d(t,{a:t}),t}}(),function(){var n,t=Object.getPrototypeOf?function(n){return Object.getPrototypeOf(n)}:function(n){return n.__proto__};e.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"===typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"===typeof i.then)return i}var a=Object.create(null);e.r(a);var l={};n=n||[null,t({}),t([]),t(t)];for(var s=2&o&&i;"object"==typeof s&&!~n.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(n){l[n]=function(){return i[n]}}));return l["default"]=function(){return i},e.d(a,l),a}}(),function(){e.d=function(n,t){for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})}}(),function(){e.f={},e.e=function(n){return Promise.all(Object.keys(e.f).reduce((function(t,i){return e.f[i](n,t),t}),[]))}}(),function(){e.u=function(n){return"js/"+n+"."+{93:"8d4f511e",153:"09cead1f",431:"3c9ea145",858:"7a4c9774",891:"3792ca19"}[n]+".js"}}(),function(){e.miniCssF=function(n){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)}}(),function(){var n={},t="tarea-1:";e.l=function(i,o,a,l){if(n[i])n[i].push(o);else{var s,r;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(r=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,e.nc&&s.setAttribute("nonce",e.nc),s.setAttribute("data-webpack",t+a),s.src=i),n[i]=[o];var p=function(t,e){s.onerror=s.onload=null,clearTimeout(f);var o=n[i];if(delete n[i],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(n){return n(e)})),t)return t(e)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),r&&document.head.appendChild(s)}}}(),function(){e.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}}(),function(){e.p="/integracion1/"}(),function(){var n={143:0};e.f.j=function(t,i){var o=e.o(n,t)?n[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise((function(e,i){o=n[t]=[e,i]}));i.push(o[2]=a);var l=e.p+e.u(t),s=new Error,r=function(i){if(e.o(n,t)&&(o=n[t],0!==o&&(n[t]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",s.name="ChunkLoadError",s.type=a,s.request=l,o[1](s)}};e.l(l,r,"chunk-"+t,t)}},e.O.j=function(t){return 0===n[t]};var t=function(t,i){var o,a,l=i[0],s=i[1],r=i[2],c=0;if(l.some((function(t){return 0!==n[t]}))){for(o in s)e.o(s,o)&&(e.m[o]=s[o]);if(r)var u=r(e)}for(t&&t(i);c<l.length;c++)a=l[c],e.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return e.O(u)},i=self["webpackChunktarea_1"]=self["webpackChunktarea_1"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(8202)}));i=e.O(i)})();
//# sourceMappingURL=app.801980d3.js.map