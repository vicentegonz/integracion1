(function(){"use strict";var n={5583:function(n,e,t){var i=t(9242),a=t(3396),o=t(7139);const l={id:"app"},s=(0,a._)("h2",null,"Tarea 1 Taller de integracion FLIGTHS.IO",-1),r=(0,a.uE)('<div class="display"><div class="leyend"><img src="plane.png" alt="avion en vuelo" width="30" height="30"><p>Avion en vuelo</p></div><div><img src="dep.png" alt="avion en vuelo" width="30" height="30"><p>Aeropuerto de despege</p></div><div><img src="landed.png" alt="avion en vuelo" width="30" height="30"><p>Avion aterrizado</p></div><div><img src="takeoff.png" alt="avion en vuelo" width="30" height="30"><p>Avion despegando</p></div><div><img src="crash.png" alt="avion en vuelo" width="30" height="30"><p>Avion accidentado</p></div><div><img src="location.png" alt="avion en vuelo" width="30" height="30"><p>Aeropuerto de destino</p></div></div>',1),c={id:"container"},u={id:"top"},d={id:"chat"},p=(0,a._)("h1",null,"ChatRoom",-1),f={id:"mesages"},g={key:0},h={class:"user"},m={class:"date"},v={key:1,class:"warn"},y={class:"user"},_={class:"date"},w={id:"map"},k={key:0},b={id:"bot"},z={key:0},j=(0,a._)("h1",null,"Fligths",-1),O=(0,a._)("tr",null,[(0,a._)("th",{colspan:"2"},"Origen"),(0,a._)("th",{colspan:"2"},"Destino"),(0,a._)("th",{rowspan:"2"},"ID de vuelo"),(0,a._)("th",{rowspan:"2"},"Horario")],-1),A=(0,a._)("tr",null,[(0,a._)("th",null,"Aeropuerto"),(0,a._)("th",null,"Ciudad"),(0,a._)("th",null,"Aeropuerto"),(0,a._)("th",null,"Ciudad")],-1);function S(n,e,t,S,C,P){const D=(0,a.up)("HelloWorld");return(0,a.wg)(),(0,a.iD)("div",l,[s,(0,a._)("button",{onClick:e[0]||(e[0]=n=>P.conect())},"conect"),(0,a._)("button",{onClick:e[1]||(e[1]=n=>P.disconect())},"disconect"),r,(0,a._)("div",c,[(0,a._)("div",u,[(0,a._)("div",d,[p,(0,a._)("div",f,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.m_data,(n=>((0,a.wg)(),(0,a.iD)("div",{key:n},["info"==n.message.level?((0,a.wg)(),(0,a.iD)("p",g,[(0,a._)("span",h,(0,o.zw)(n.message.name)+":",1),(0,a.Uk)(" "+(0,o.zw)(n.message.content)+" ",1),(0,a._)("span",m,(0,o.zw)(n.message.date),1)])):((0,a.wg)(),(0,a.iD)("p",v,[(0,a._)("span",y,(0,o.zw)(n.message.name)+":",1),(0,a.Uk)(" "+(0,o.zw)(n.message.content)+" ",1),(0,a._)("span",_,(0,o.zw)(n.message.date),1)]))])))),128))]),(0,a.wy)((0,a._)("input",{class:"mensaje",type:"text","onUpdate:modelValue":e[2]||(e[2]=e=>n.msg=e)},null,512),[[i.nr,n.msg]]),(0,a._)("button",{onClick:e[3]||(e[3]=(...n)=>P.sendMessage&&P.sendMessage(...n))},"Send")]),(0,a._)("div",w,[n.f_data?((0,a.wg)(),(0,a.iD)("h1",k,"Estado de Vuelos")):(0,a.kq)("",!0),n.f_data?((0,a.wg)(),(0,a.j4)(D,{key:1,fligts:n.f_data,crashed:n.c_data,landed:n.l_data,planes:n.p_data,takeoff:n.t_data},null,8,["fligts","crashed","landed","planes","takeoff"])):(0,a.kq)("",!0)])]),(0,a._)("div",b,[n.f_data?((0,a.wg)(),(0,a.iD)("div",z,[j,(0,a._)("table",null,[O,A,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.f_data.flights,(n=>((0,a.wg)(),(0,a.iD)("tr",{key:n},[(0,a._)("td",null,(0,o.zw)(n.departure.name)+" ("+(0,o.zw)(n.departure.id)+")",1),(0,a._)("td",null,(0,o.zw)(n.departure.city.name)+" ("+(0,o.zw)(n.departure.city.country.id)+")",1),(0,a._)("td",null,(0,o.zw)(n.destination.name)+" ("+(0,o.zw)(n.destination.id)+")",1),(0,a._)("td",null,(0,o.zw)(n.destination.city.name)+" ("+(0,o.zw)(n.destination.city.country.id)+")",1),(0,a._)("td",null,(0,o.zw)(n.id),1),(0,a._)("td",null,(0,o.zw)(n.departure_date),1)])))),128))])])):(0,a.kq)("",!0)])])])}function C(n,e,t,i,o,l){const s=(0,a.up)("l-tile-layer"),r=(0,a.up)("l-icon"),c=(0,a.up)("l-marker"),u=(0,a.up)("l-polyline"),d=(0,a.up)("l-map");return(0,a.wg)(),(0,a.j4)(d,{style:{height:"450px"},zoom:o.zoom,center:o.center,maxZoom:11,minZoom:1},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{url:o.url,attribution:o.attribution},null,8,["url","attribution"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(t.fligts.flights),(n=>((0,a.wg)(),(0,a.iD)("div",{key:n},[(0,a.Wm)(c,{onClick:e=>l.showPopup(t.fligts.flights[n].departure.name),"lat-lng":[t.fligts.flights[n].departure.location.lat,t.fligts.flights[n].departure.location.long]},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"dep.png"},null,8,["icon-size","icon-anchor"])])),_:2},1032,["onClick","lat-lng"]),(0,a.Wm)(c,{class:"dep",onClick:e=>l.showPopup(t.fligts.flights[n].destination.name),"lat-lng":[t.fligts.flights[n].destination.location.lat,t.fligts.flights[n].destination.location.long]},null,8,["onClick","lat-lng"])])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(t.fligts.flights),(n=>((0,a.wg)(),(0,a.j4)(u,{key:n,"lat-lngs":[[t.fligts.flights[n].departure.location.lat,t.fligts.flights[n].departure.location.long],[t.fligts.flights[n].destination.location.lat,t.fligts.flights[n].destination.location.long]]},null,8,["lat-lngs"])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(t.planes),(n=>((0,a.wg)(),(0,a.iD)("div",{key:n},[Object.keys(t.fligts.flights).includes(n)?((0,a.wg)(),(0,a.j4)(u,{key:0,"lat-lngs":t.planes[n].latlong,color:o.color},null,8,["lat-lngs","color"])):(0,a.kq)("",!0),Object.keys(t.fligts.flights).includes(n)?((0,a.wg)(),(0,a.j4)(c,{key:1,onClick:e=>l.showPlanePopup(n),"lat-lng":[t.planes[n].plane.position.lat,t.planes[n].plane.position.long]},{default:(0,a.w5)((()=>["arrived"==t.planes[n].plane.status?((0,a.wg)(),(0,a.j4)(r,{key:0,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"landed.png"},null,8,["icon-size","icon-anchor"])):(0,a.kq)("",!0),"crashed"==t.planes[n].plane.status?((0,a.wg)(),(0,a.j4)(r,{key:1,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"crash.png"},null,8,["icon-size","icon-anchor"])):(0,a.kq)("",!0),"take-off"==t.planes[n].plane.status?((0,a.wg)(),(0,a.j4)(r,{key:2,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"takeoff.png"},null,8,["icon-size","icon-anchor"])):(0,a.kq)("",!0),"flying"==t.planes[n].plane.status?((0,a.wg)(),(0,a.j4)(r,{key:3,"icon-size":l.dynamicSize,"icon-anchor":l.dynamicAnchor,"icon-url":"plane.png"},null,8,["icon-size","icon-anchor"])):(0,a.kq)("",!0)])),_:2},1032,["onClick","lat-lng"])):((0,a.wg)(),(0,a.j4)(c,{key:2,onClick:e=>l.showPlanePopup(n),"lat-lng":[t.planes[n].plane.position.lat,t.planes[n].plane.position.long],visible:!1},null,8,["onClick","lat-lng"]))])))),128))])),_:1},8,["zoom","center"])}var P=t(4575),D={props:["fligts","crashed","landed","takeoff","planes"],components:{LMap:P.iA,LTileLayer:P.Hw,LMarker:P.$R,LPolyline:P.P6,LIcon:P.QC},data(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:3,center:[51.505,-.159],markerLatLng:[51.504,-.159],color:"red",iconSize:[32,37],iconAnchor:[16,37]}},methods:{showPlanePopup(n){var e=null,t=null,i=null,a=null,o=null,l=null,s=null,r=null,c=null;Object.keys(this.planes).forEach((u=>{u==n&&(e=this.planes[u].plane.captain,t=this.planes[u].plane.airline.name,i=this.planes[u].plane.airline.id,a=this.planes[u].plane.ETA,o=this.planes[u].plane.status,l=this.planes[u].plane.distance,s=this.planes[u].plane.arrival,r=this.planes[u].plane.heading.lat,c=this.planes[u].plane.heading.long)})),alert(`Id vuelo: ${n} \n\n      Aerolinea: ${t} (${i})\n\n      Capitan: ${e}\n\n      ETA: ${a}\n\n      Estado del vuelo: ${o}\n\n      Distancia al destino: ${l}\n\n      Hora de llegada estimada: ${s}\n\n      Direccion: ${r}, ${c}`)},showPopup(n){var e=[],t=[],i=null,a=null;Object.keys(this.fligts.flights).forEach((o=>{this.fligts.flights[o].departure.name==n&&(e.push(o),i=this.fligts.flights[o].departure.city.country.name,a=this.fligts.flights[o].departure.city.name),this.fligts.flights[o].destination.name==n&&(t.push(o),i=this.fligts.flights[o].destination.city.country.name,a=this.fligts.flights[o].destination.city.name)})),alert(`Aeropuerto: ${n} que se encuentra en ${a}, ${i} \n\n      Vuelos hacia el aeropuerto: ${t} \n\n      Vuelos desde el aeropuert: ${e}`)}},computed:{dynamicSize(){return[this.iconSize,1.15*this.iconSize]},dynamicAnchor(){return[this.iconSize/2,1.15*this.iconSize]}}},E=t(89);const $=(0,E.Z)(D,[["render",C]]);var T=$,H={name:"App",components:{HelloWorld:T},data:function(){return{msg:null,connection:null,cEvent:JSON.stringify({type:"join",id:"1b62b209-b288-4459-94ba-3297c013d269",username:"vichonario"}),f_data:null,p_data:{},t_data:[],l_data:[],c_data:[],m_data:[]}},methods:{sendMessage:function(n){if(console.log("the mesage is",this.msg,n),null!=this.msg){var e=JSON.stringify({type:"chat",content:this.msg});this.connection.send(e),this.msg=null}},conect:function(){this.connection.send(this.cEvent)},disconect:function(){this.connection.close()}},created:function(){this.connection=new WebSocket("wss://tarea-1.2022-2.tallerdeintegracion.cl/connect"),this.connection.onmessage=n=>{var e=JSON.parse(n.data);if("flights"==e.type){const n=Object.entries(e.flights);n.sort(((n,e)=>n[1].destination.name>e[1].destination.name?1:n[1].destination.name<e[1].destination.name?-1:0)),n.sort(((n,e)=>n[1].departure.name>e[1].departure.name?1:n[1].departure.name<e[1].departure.name?-1:0));var t={type:"flights",flights:{}};n.forEach((n=>{t.flights[n[0]]=n[1]})),this.f_data=t}else"plane"==e.type?Object.keys(this.p_data).includes(e.plane.flight_id)?(this.p_data[e.plane.flight_id].plane=e.plane,this.p_data[e.plane.flight_id].latlong.push([e.plane.position.lat,e.plane.position.long])):this.p_data[e.plane.flight_id]={plane:e.plane,latlong:[[e.plane.position.lat,e.plane.position.long]]}:"message"==e.type?this.m_data.push(e):"take-off"==e.type?Object.keys(this.p_data).includes(e.flight_id)&&(this.p_data[e.flight_id].latlong=[]):"landing"==e.type?this.l_data.push(e):"crashed"==e.type&&this.c_data.push(e)},this.connection.onopen=function(){console.log("Successfully connected to the echo websocket server...")},this.connection.onclose=function(){console.log("Successfully disconnected to the echo websocket server..."),location.reload()}}};const L=(0,E.Z)(H,[["render",S]]);var q=L;(0,i.ri)(q).mount("#app")}},e={};function t(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return n[i].call(o.exports,o,o.exports,t),o.exports}t.m=n,function(){var n=[];t.O=function(e,i,a,o){if(!i){var l=1/0;for(u=0;u<n.length;u++){i=n[u][0],a=n[u][1],o=n[u][2];for(var s=!0,r=0;r<i.length;r++)(!1&o||l>=o)&&Object.keys(t.O).every((function(n){return t.O[n](i[r])}))?i.splice(r--,1):(s=!1,o<l&&(l=o));if(s){n.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=n.length;u>0&&n[u-1][2]>o;u--)n[u]=n[u-1];n[u]=[i,a,o]}}(),function(){t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,{a:e}),e}}(),function(){var n,e=Object.getPrototypeOf?function(n){return Object.getPrototypeOf(n)}:function(n){return n.__proto__};t.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"===typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"===typeof i.then)return i}var o=Object.create(null);t.r(o);var l={};n=n||[null,e({}),e([]),e(e)];for(var s=2&a&&i;"object"==typeof s&&!~n.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(n){l[n]=function(){return i[n]}}));return l["default"]=function(){return i},t.d(o,l),o}}(),function(){t.d=function(n,e){for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})}}(),function(){t.f={},t.e=function(n){return Promise.all(Object.keys(t.f).reduce((function(e,i){return t.f[i](n,e),e}),[]))}}(),function(){t.u=function(n){return"js/"+n+"."+{93:"8d4f511e",153:"09cead1f",431:"3c9ea145",858:"7a4c9774",891:"3792ca19"}[n]+".js"}}(),function(){t.miniCssF=function(n){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){var n={},e="tarea-1:";t.l=function(i,a,o,l){if(n[i])n[i].push(a);else{var s,r;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==e+o){s=d;break}}s||(r=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",e+o),s.src=i),n[i]=[a];var p=function(e,t){s.onerror=s.onload=null,clearTimeout(f);var a=n[i];if(delete n[i],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(n){return n(t)})),e)return e(t)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),r&&document.head.appendChild(s)}}}(),function(){t.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}}(),function(){t.p="/integracion1/"}(),function(){var n={143:0};t.f.j=function(e,i){var a=t.o(n,e)?n[e]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise((function(t,i){a=n[e]=[t,i]}));i.push(a[2]=o);var l=t.p+t.u(e),s=new Error,r=function(i){if(t.o(n,e)&&(a=n[e],0!==a&&(n[e]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,a[1](s)}};t.l(l,r,"chunk-"+e,e)}},t.O.j=function(e){return 0===n[e]};var e=function(e,i){var a,o,l=i[0],s=i[1],r=i[2],c=0;if(l.some((function(e){return 0!==n[e]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(r)var u=r(t)}for(e&&e(i);c<l.length;c++)o=l[c],t.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return t.O(u)},i=self["webpackChunktarea_1"]=self["webpackChunktarea_1"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(5583)}));i=t.O(i)})();
//# sourceMappingURL=app.af5f73ae.js.map